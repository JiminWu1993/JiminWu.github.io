<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>英语时态之旅</title>
    <style>
        /* 基础样式设置 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        
        body {
            background-color: black;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* 游戏容器 */
        #game-container {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }
        
        /* 图片样式 */
        .scene-image {
            width: 100%;
            height: auto;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        
        /* 文字显示区域 */
        .text-display {
            width: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            padding: 15px;
            text-align: center;
            font-size: 18px;
            line-height: 1.5;
            border-top: 1px solid #333;
        }
        
        /* 按钮容器 */
        .buttons-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 15px;
            background-color: black;
        }
        
        /* 选项按钮行 */
        .button-row {
            display: flex;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }
        
        /* 选项按钮样式 */
        .option-button {
            flex: 1;
            padding: 12px 5px;
            background-color: #1a5fb4;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            opacity: 0.7;
        }
        
        .option-button.selected {
            opacity: 1;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }
        
        /* Continue按钮样式 */
        .continue-button {
            width: 100%;
            padding: 15px;
            background-color: #1a5fb4;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* 提示框样式 */
        .message-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: blue;
            color: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 1000;
            text-align: center;
            display: none;
        }
        
        /* 计分页面特殊样式 */
        .score-display {
            font-size: 24px;
            font-weight: bold;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <!-- 游戏内容将通过JavaScript动态生成 -->
    </div>
    
    <div class="message-box" id="message-box"></div>
    
    <script>
        // 游戏数据定义
        const gameData = {
            // 当前页面ID
            currentPageId: 2100,
            
            // 用户得分
            score: 0,
            
            // 所有页面数据
            pages: {
                // 开始画面
                2100: {
                    image: "开始画面.jpg",
                    text: "Welcome to the journey of English tenses",
                    buttons: [
                        {
                            content: "Begin",
                            correct: true,
                            action: () => navigateTo(2101)
                        }
                    ]
                },
                
                // 画面01
                2101: {
                    image: "画面01.jpg",
                    text: "Arturo: Hello, I'm Arturo Valdez.",
                    buttons: [
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2102)
                        }
                    ]
                },
                
                // 画面02
                2102: {
                    image: "画面02.jpg",
                    text: "Alexa: Hi. My name (1) Alexandra Costa, but please (2) me Alexa.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: true, group: 1 },
                            { content: "am", correct: false, group: 1 },
                            { content: "are", correct: false, group: 1 }
                        ],
                        // 第二行按钮
                        [
                            { content: "calls", correct: false, group: 2 },
                            { content: "call", correct: true, group: 2 },
                            { content: "calling", correct: false, group: 2 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2103)
                        }
                    ]
                },
                
                // 画面03
                2103: {
                    image: "画面03.jpg",
                    text: "Arturo: OK. Where (3) you from, Alexa?",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: false, group: 3 },
                            { content: "are", correct: true, group: 3 },
                            { content: "am", correct: false, group: 3 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2104)
                        }
                    ]
                },
                
                // 画面04
                2104: {
                    image: "画面04.jpg",
                    text: "Alexa: Brazil. How about you?",
                    buttons: [
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2105)
                        }
                    ]
                },
                
                // 画面05
                2105: {
                    image: "画面05.jpg",
                    text: "Arturo: I'm from Mexico. I (4) here in the city now, but my family (5) in a small town near Guadalajara.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "lives", correct: true, group: 4 },
                            { content: "live", correct: false, group: 4 },
                            { content: "living", correct: false, group: 4 }
                        ],
                        // 第二行按钮
                        [
                            { content: "lives", correct: true, group: 5 },
                            { content: "live", correct: false, group: 5 },
                            { content: "are living", correct: false, group: 5 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2106)
                        }
                    ]
                },
                
                // 画面06
                2106: {
                    image: "画面06.jpg",
                    text: "Alexa: Oh, I (6) Mexico! It (7) really beautiful. My brother (8) Mexico, too. Oh, good. Soo-jin (9) here.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "loves", correct: false, group: 6 },
                            { content: "love", correct: true, group: 6 },
                            { content: "loving", correct: false, group: 6 }
                        ],
                        // 第二行按钮
                        [
                            { content: "is", correct: true, group: 7 },
                            { content: "am", correct: false, group: 7 },
                            { content: "are", correct: false, group: 7 }
                        ],
                        // 第三行按钮
                        [
                            { content: "loves", correct: true, group: 8 },
                            { content: "love", correct: false, group: 8 },
                            { content: "loving", correct: false, group: 8 }
                        ],
                        // 第四行按钮
                        [
                            { content: "is", correct: true, group: 9 },
                            { content: "are", correct: false, group: 9 },
                            { content: "am", correct: false, group: 9 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2107)
                        }
                    ]
                },
                
                // 画面07
                2107: {
                    image: "画面07.jpg",
                    text: "Arturo: Who (10) Soo-jin? She (11) familiar.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: true, group: 10 },
                            { content: "are", correct: false, group: 10 },
                            { content: "am", correct: false, group: 10 }
                        ],
                        // 第二行按钮
                        [
                            { content: "looks", correct: true, group: 11 },
                            { content: "look", correct: false, group: 11 },
                            { content: "looking", correct: false, group: 11 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2108)
                        }
                    ]
                },
                
                // 画面08
                2108: {
                    image: "画面08.jpg",
                    text: "Alexa: She (12) my classmate. We (13) in the same business class. We (14) our class every Monday and Wednesday.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: false, group: 12 },
                            { content: "are", correct: true, group: 12 },
                            { content: "am", correct: false, group: 12 }
                        ],
                        // 第二行按钮
                        [
                            { content: "is", correct: false, group: 13 },
                            { content: "are", correct: true, group: 13 },
                            { content: "am", correct: false, group: 13 }
                        ],
                        // 第三行按钮
                        [
                            { content: "has", correct: false, group: 14 },
                            { content: "have", correct: true, group: 14 },
                            { content: "having", correct: false, group: 14 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2109)
                        }
                    ]
                },
                
                // 画面09
                2109: {
                    image: "画面09.jpg",
                    text: "Arturo: Where (15) she from?",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: false, group: 15 },
                            { content: "are", correct: true, group: 15 },
                            { content: "am", correct: false, group: 15 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2110)
                        }
                    ]
                },
                
                // 画面10
                2110: {
                    image: "画面10.jpg",
                    text: "Alexa: South Korea. She (16) marketing. She (17) the classes (18) very interesting. Let's go and say hello. Sorry, what (19) your last name again? Vargas?",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "studies", correct: true, group: 16 },
                            { content: "study", correct: false, group: 16 },
                            { content: "studying", correct: false, group: 16 }
                        ],
                        // 第二行按钮
                        [
                            { content: "says", correct: true, group: 17 },
                            { content: "say", correct: false, group: 17 },
                            { content: "saying", correct: false, group: 17 }
                        ],
                        // 第三行按钮
                        [
                            { content: "is", correct: false, group: 18 },
                            { content: "are", correct: true, group: 18 },
                            { content: "am", correct: false, group: 18 }
                        ],
                        // 第四行按钮
                        [
                            { content: "is", correct: true, group: 19 },
                            { content: "are", correct: false, group: 19 },
                            { content: "am", correct: false, group: 19 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2111)
                        }
                    ]
                },
                
                // 画面11
                2111: {
                    image: "画面11.jpg",
                    text: "Arturo: Actually, it (20) Valdez",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: true, group: 20 },
                            { content: "are", correct: false, group: 20 },
                            { content: "am", correct: false, group: 20 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2112)
                        }
                    ]
                },
                
                // 画面12
                2112: {
                    image: "画面12.jpg",
                    text: "Alexa: How (21) you spell that?",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: false, group: 21 },
                            { content: "are", correct: true, group: 21 },
                            { content: "am", correct: false, group: 21 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2113)
                        }
                    ]
                },
                
                // 画面13 - 开始计分
                2113: {
                    image: "画面13.jpg",
                    text: "My name's Nick. My girlfriend's name (1) Karen. We (2) students. I (3) to university in Oxford.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: true, group: 22 },
                            { content: "are", correct: false, group: 22 },
                            { content: "am", correct: false, group: 22 }
                        ],
                        // 第二行按钮
                        [
                            { content: "is", correct: false, group: 23 },
                            { content: "are", correct: true, group: 23 },
                            { content: "am", correct: false, group: 23 }
                        ],
                        // 第三行按钮
                        [
                            { content: "go", correct: true, group: 24 },
                            { content: "goes", correct: false, group: 24 },
                            { content: "going", correct: false, group: 24 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2114)
                        }
                    ]
                },
                
                // 画面14 - 计分
                2114: {
                    image: "画面14.jpg",
                    text: "Karen (4) go to university in Oxford; she (5) to university in Cambridge. She (6) in Cambridge.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "don't", correct: false, group: 25 },
                            { content: "isn't", correct: false, group: 25 },
                            { content: "doesn't", correct: true, group: 25 }
                        ],
                        // 第二行按钮
                        [
                            { content: "go", correct: false, group: 26 },
                            { content: "goes", correct: true, group: 26 },
                            { content: "going", correct: false, group: 26 }
                        ],
                        // 第三行按钮
                        [
                            { content: "lives", correct: true, group: 27 },
                            { content: "live", correct: false, group: 27 },
                            { content: "living", correct: false, group: 27 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2115)
                        }
                    ]
                },
                
                // 画面15 - 计分
                2115: {
                    image: "画面15.jpg",
                    text: "I (7) with my parents in Woodstock, which (8) a small town near Oxford.",
                    buttons: [
                        // 第一行按钮
                        [
                           极 { content: "lives", correct: false, group: 28 },
                            { content: "live", correct: true, group: 28 },
                            { content: "living", correct: false, group: 28 }
                        ],
                        // 第二行按钮
                        [
                            { content: "is", correct: true, group: 29 },
                            { content: "are", correct: false, group: 29 },
                            { content: "am", correct: false, group: 极29 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2116)
                        }
                    ]
                },
                
                // 画面16 - 计分
                2116: {
                    image: "画面16.jpg",
                    text: "It (9) difficult sometimes because we (10) each other only on weekends.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "is", correct: true, group: 30 },
                            { content: "are", correct: false, group: 30 },
                            { content: "am", correct: false, group: 30 }
                        ],
                        // 第二行按钮
                        [
                            { content: "see", correct: true, group: 31 },
                            { content: "sees", correct: false, group: 31 },
                            { content: "seeing", correct: false, group: 31 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2117)
                        }
                    ]
                },
                
                // 画面17 - 计分
                211极7: {
                    image: "画面17.jpg",
                    text: "Karen (11) history, and she (12) her course. She (13) the architecture in Cambridge (14) beautiful.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "studies", correct: true, group: 32 },
                            { content: "study", correct: false, group: 32 },
                            { content: "studying", correct: false, group: 32 }
                        ],
                        // 第二行按钮
                        [
                            { content: "love", correct: false, group: 33 },
                            { content: "loves", correct: true, group: 33 },
                            { content: "loving", correct: false, group: 33 }
                        ],
                        // 第三行按钮
                        [
                            { content: "says", correct: true, group: 34 },
                            { content: "say", correct: false, group: 34 },
                            { content: "saying", correct: false, group: 34 }
                        ],
                        // 第四行按钮
                        [
                            { content: "is", correct: true, group: 35 },
                            { content: "are", correct: false, group: 35 },
                            { content: "am", correct: false, group: 35 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2118)
                        }
                    ]
                },
                
                // 画面18 - 计分
                2118: {
                    image: "画面18.jpg",
                    text: "I (15) philosophy and politics, so my courses (16) very different from hers.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "studies", correct: false, group: 36 },
                            { content: "study", correct: true, group: 36 },
                            { content: "studying", correct: false, group: 36 }
                        ],
                        // 第二极行按钮
                        [
                            { content: "is", correct: false, group: 37 },
                            { content: "are", correct: true, group: 37 },
                            { content: "am", correct: false, group: 37 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2119)
                        }
                    ]
                },
                
                // 画面19 - 计分
                2119: {
                    image: "画面19.jpg",
                    text: "I (17) living in Woodstock because my family (18) there and it (19) quiet, but I (20) Karen a lot.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "like", correct: true, group: 38 },
                            { content: "likes", correct: false, group: 38 },
                            { content: "liking", correct: false, group: 38 }
                        ],
                        // 第二行按钮
                        [
                            { content: "is", correct: true, group: 39 },
                            { content: "are", correct: false, group: 39 },
                            { content: "am", correct: false, group: 39 }
                        ],
                        // 第三行按钮
                        [
                            { content: "is", correct: true, group: 40 },
                            { content: "are", correct: false, group: 40 },
                            { content: "am", correct: false, group: 40 }
                        ],
                        // 第四行按钮
                        [
                            { content: "miss", correct: true, group: 41 },
                            { content: "misses", correct: false, group: 41 },
                            { content: "missing", correct: false, group: 41 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2120)
                        }
                    ]
                },
                
                // 画面20 - 计分
                2120: {
                    image: "画面20.jpg",
                    text: "We (21) on the phone every night and we (22) each other whenever we can.",
                    buttons: [
                        // 第一行按钮
                        [
                            { content: "talk", correct: true, group: 42 },
                            { content: "talks", correct: false, group: 42 },
                            { content: "talking", correct: false极, group: 42 }
                        ],
                        // 第二行按钮
                        [
                            { content: "visit", correct: true, group: 43 },
                            { content: "visits", correct: false, group: 43 },
                            { content: "visiting", correct: false, group: 43 }
                        ],
                        // Continue按钮
                        {
                            content: "Continue",
                            correct: true,
                            action: () => navigateTo(2121)
                        }
                    ]
                },
                
                // 画面21 - 得分画面
                2121: {
                    image: "", // 动态设置
                    text: "",
                    buttons: []
                }
            },
            
            // 存储用户选择
            userSelections: {}
        };
        
        // 图片预加载
        function preloadImages() {
            const imageUrls = [];
            
            // 收集所有图片URL
            for (const pageId in gameData.pages) {
                if (gameData.pages[pageId].image) {
                    imageUrls.push(`images/${gameData.pages[pageId].image}`);
                }
            }
            
            // 预加载图片
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        }
        
        // 显示消息
        function showMessage(message, duration = 1500) {
            const messageBox = document.getElementById('message-box');
            messageBox.textContent = message;
            messageBox.style.display = 'block';
            
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, duration);
        }
        
        // 导航到指定页面
        function navigateTo(pageId) {
            // 检查是否需要计分
            if (gameData.currentPageId >= 2113 && gameData.currentPageId <= 2120) {
                calculateScoreForCurrentPage();
            }
            
            // 更新当前页面ID
            gameData.currentPageId = pageId;
            
            // 渲染新页面
            renderPage();
            
            // 预加载下一张图片
            preloadNextImage();
        }
        
        // 计算当前页面的得分
        function calculateScoreForCurrentPage() {
            const currentPage = gameData.pages[gameData.currentPageId];
            const userSelections = gameData.userSelections[gameData.currentPageId] || {};
            
            // 检查每一组按钮的选择
            for (const groupId in userSelections) {
                if (userSelections[groupId].correct) {
                    gameData.score++;
                }
            }
        }
        
        // 渲染当前页面
        function renderPage() {
            const container = document.getElementById('game-container');
            container.innerHTML = '';
            
            const currentPage = gameData.pages[gameData.currentPageId];
            
            // 如果是得分页面
            if (gameData.currentPageId === 2121) {
                renderScorePage(container);
                return;
            }
            
            // 创建图片元素
            const img = document.createElement('img');
            img.className = 'scene-image';
            img.src = `images/${currentPage.image}`;
            img.alt = `Scene ${gameData.currentPageId}`;
            img.onload = () => {
                // 图片加载完成后淡入
                img.style.opacity = '1';
            };
            container.appendChild(img);
            
            // 创建文字显示区域
            const textDisplay = document.createElement('div');
            textDisplay.className = 'text-display';
            textDisplay.textContent = currentPage.text;
            container.appendChild(textDisplay);
            
            // 创建按钮容器
            const buttonsContainer = document.createElement('div');
            buttonsContainer.className = 'buttons-container';
            container.appendChild(buttonsContainer);
            
            // 渲染按钮
            if (Array.isArray(currentPage.buttons[0])) {
                // 多组按钮
                for (let i = 0; i < currentPage.buttons.length - 1; i++) {
                    const buttonGroup = currentPage.buttons[i];
                    const buttonRow = document.createElement('div');
                    buttonRow.className = 'button-row';
                    
                    for (const buttonData of buttonGroup) {
                        const button = document.createElement('button');
                        button.className = 'option-button';
                        button.textContent = buttonData.content;
                        button.dataset.group = buttonData.group;
                        
                        // 检查是否已选择此按钮
                        const userSelections = gameData.userSelections[gameData.currentPageId] || {};
                        if (userSelections[buttonData.group] && userSelections[buttonData.group].content === buttonData.content) {
                            button.classList.add('selected');
                        }
                        
                        button.onclick = () => handleOptionClick(buttonData, button, buttonRow);
                        buttonRow.appendChild(button);
                    }
                    
                    buttonsContainer.appendChild(buttonRow);
                }
                
                // Continue按钮
                const continueButton = currentPage.buttons[currentPage.buttons.length - 1];
                const button = document.createElement('button');
                button.className = 'continue-button';
                button.textContent = continueButton.content;
                button.onclick = continueButton.action;
                buttonsContainer.appendChild(button);
            } else {
                // 只有Continue按钮
                for (const buttonData of currentPage.buttons) {
                    const button = document.createElement('button');
                    button.className = 'continue-button';
                    button.textContent = buttonData.content;
                    button.onclick = buttonData.action;
                    buttonsContainer.appendChild(button);
                }
            }
        }
        
        // 渲染得分页面
        function renderScorePage(container) {
            // 计算最终得分
            const finalScore = Math.floor(gameData.score * (100 / 22));
            
            // 创建图片元素
            const img = document.createElement('img');
            img.className = 'scene-image';
            img.src = `images/${finalScore >= 60 ? '及格.jpg' : '不及格.jpg'}`;
            img.alt = finalScore >= 60 ? 'Pass' : 'Fail';
            img.onload = () => {
                img.style.opacity = '1';
            };
            container.appendChild(img);
            
            // 创建得分显示
            const scoreDisplay = document.createElement('div');
            scoreDisplay.className = 'score-display';
            scoreDisplay.textContent = `您的得分: ${finalScore}`;
            container.appendChild(scoreDisplay);
        }
        
        // 处理选项按钮点击
        function handleOptionClick(buttonData, button, buttonRow) {
            // 获取同组的所有按钮
            const groupButtons = buttonRow.querySelectorAll('.option-button');
            
            // 移除同组按钮的选中状态
            groupButtons.forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // 设置当前按钮为选中状态
            button.classList.add('selected');
            
            // 存储用户选择
            if (!gameData.userSelections[gameData.currentPageId]) {
                gameData.userSelections[gameData.currentPageId] = {};
            }
            
            gameData.user极lections[gameData.currentPageId][buttonData.group] = {
                content: buttonData.content,
                correct: buttonData.correct
            };
        }
        
        // 预加载下一张图片
        function preloadNextImage() {
            const nextPageId = gameData.currentPageId + 1;
            if (gameData.pages[nextPageId] && gameData.pages[nextPageId].image) {
                const img = new Image();
                img.src = `images/${gameData.pages[nextPageId].image}`;
            }
        }
        
        // 初始化游戏
        function initGame() {
            preloadImages();
            renderPage();
        }
        
        // 页面加载完成后初始化游戏
        window.onload = initGame;
    </script>
</body>
</html>
